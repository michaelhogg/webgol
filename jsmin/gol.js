function GOLAnimator(a,b){this.gol=a,this.targetFPS=15,this.$actualFPSDisplayElement=$("#"+b),this.actualFPS=0,this.latestStepTimestamp=0,this.timerID=null,this.MS_PER_SECOND=1e3}function GOL(a,b){if(!window.WebGLRenderingContext)throw new Error("Browser does not support WebGLRenderingContext");if(this.CELL_SIZE=b,this.igloo=new Igloo(a),!(this.igloo.gl instanceof WebGLRenderingContext))throw new Error("Browser does support WebGLRenderingContext, but failed to initialise WebGL");this.gl=this.igloo.gl,this.VIEW_WIDTH=a.width,this.VIEW_HEIGHT=a.height,this.STATE_WIDTH=Math.floor(a.width/b),this.STATE_HEIGHT=Math.floor(a.height/b),this.TOTAL_CELLS=this.STATE_WIDTH*this.STATE_HEIGHT,this.enableWrapping=!0,this.enableMutation=!0,this.cornerColours={topLeft:new Float32Array([1,1,0,1]),topRight:new Float32Array([1,0,0,1]),bottomLeft:new Float32Array([0,1,0,1]),bottomRight:new Float32Array([.3,.3,1,1])},this.TEXTURE_PIXELTYPE=this.gl.UNSIGNED_BYTE,this.TEXTURE_PIXELFORMAT=this.gl.RGBA,this.CHANNELS_PER_PIXEL=4,this.PIXEL_CHANNEL_MAX_VALUE=255,this.BITS_PER_PIXEL_CHANNEL=8,this.COLOUR_DEAD=new Uint8Array([0,0,0,this.PIXEL_CHANNEL_MAX_VALUE]),this.COLOUR_ALIVE=new Uint8Array([this.PIXEL_CHANNEL_MAX_VALUE,0,0,this.PIXEL_CHANNEL_MAX_VALUE]),this.MODE_RANDOM=1,this.MODE_PATTERNS=2,this.MODE_CUSTOM=3,this.MUTATION_RATE=Math.ceil(1e-5*this.TOTAL_CELLS)}function GOLGrid(){this.cellData=[],this.width=0,this.height=0}function GOLUISwitcheryMutation(a){this.gol=a,this.switchery=null}function GOLUISwitcheryWrapping(a){this.gol=a,this.switchery=null}function GOLUI(a,b){this.gol=a,this.golAnimator=b,this.state={hasUserOpenedControlPanelYet:!1,isToolbarDisplayed:!1,isControlPanelDisplayed:!1,toolbarFadeoutTimeoutID:null,isControlMenuDisplayed:!1,isKeyboardShortcutsPanelDisplayed:!1}}GOLAnimator.prototype.now=function(){return Math.floor(Date.now()/this.MS_PER_SECOND)},GOLAnimator.prototype.doAnimationStep=function(){this.gol.calculateAndRenderNextState(),this.now()===this.latestStepTimestamp?this.actualFPS++:(this.$actualFPSDisplayElement.text(this.actualFPS),this.latestStepTimestamp=this.now(),this.actualFPS=0)},GOLAnimator.prototype.start=function(){if(!this.isRunning()){this.actualFPS=0,this.latestStepTimestamp=this.now();var a=this,b=this.MS_PER_SECOND/this.targetFPS;this.timerID=setInterval(function(){a.doAnimationStep()},b)}},GOLAnimator.prototype.stop=function(){this.isRunning()&&(clearInterval(this.timerID),this.timerID=null)},GOLAnimator.prototype.isRunning=function(){return null!==this.timerID},GOLAnimator.prototype.toggle=function(){this.isRunning()?this.stop():this.start()},GOLAnimator.prototype.changeTargetFramerate=function(a){var b=this.isRunning();b&&this.stop(),this.targetFPS=a,b&&this.start()},GOL.prototype.init=function(){var a={vertex:GOLUtils.fetchShaderSourceCode("glsl/triangle-strip.vert"),nextStateFragment:GOLUtils.fetchShaderSourceCode("glsl/next-state.frag"),renderFragment:GOLUtils.fetchShaderSourceCode("glsl/render.frag")};try{this.programs={nextState:new Igloo.Program(this.gl,a.vertex,a.nextStateFragment),render:new Igloo.Program(this.gl,a.vertex,a.renderFragment)}}catch(b){throw new Error("Error compiling or linking WebGLProgram: "+b.message)}this.triangleStrip={primitivesMode:this.gl.TRIANGLE_STRIP,vertexBuffer:this.igloo.array(new Float32Array([-1,-1,1,-1,-1,1,1,1])),componentsPerVertexAttribute:2,totalVertices:4},this.textures={front:this.createTexture(),back:this.createTexture()},this.offscreenFramebuffer=this.igloo.framebuffer(),this.currentMode=this.MODE_RANDOM,this.randomiseState(),this.renderState()},GOL.prototype.createTexture=function(){var a=null,b=this.gl.CLAMP_TO_EDGE,c=this.gl.NEAREST,d=this.igloo.texture(a,this.TEXTURE_PIXELFORMAT,b,c);switch(d.blank(this.STATE_WIDTH,this.STATE_HEIGHT),this.gl.getError()){case this.gl.NO_ERROR:break;case this.gl.INVALID_VALUE:throw new Error("Failed to create texture (requested texture size "+this.STATE_WIDTH+" x "+this.STATE_HEIGHT+" was probably too big)");default:throw new Error("Failed to create texture (unknown error)")}return d},GOL.prototype.iterateOverAllCells=function(a){var b,c,d,e=0,f=0,g=this.STATE_HEIGHT-1;for(b=0;b<this.TOTAL_CELLS;b++)c=g*this.STATE_WIDTH+e,d=b*this.CHANNELS_PER_PIXEL,a.call(this,c,d),e++,e>=this.STATE_WIDTH&&(f++,e=0,g=this.STATE_HEIGHT-1-f)},GOL.prototype.getStateAsGOLGrid=function(){var a,b,c=GOLGridFactory.createEmpty(this.STATE_WIDTH,this.STATE_HEIGHT),d=new Uint8Array(this.TOTAL_CELLS*this.CHANNELS_PER_PIXEL);return this.offscreenFramebuffer.attach(this.textures.front),this.gl.readPixels(0,0,this.STATE_WIDTH,this.STATE_HEIGHT,this.TEXTURE_PIXELFORMAT,this.TEXTURE_PIXELTYPE,d),this.iterateOverAllCells(function(e,f){a=d[f+0],b=a===this.PIXEL_CHANNEL_MAX_VALUE,c.cellData[e]=b}),c},GOL.prototype.setStateUsingGOLGrid=function(a){if(a.width!==this.STATE_WIDTH)throw new Error("Grid width "+a.width+" does not match GOL state width "+this.STATE_WIDTH);if(a.height!==this.STATE_HEIGHT)throw new Error("Grid height "+a.height+" does not match GOL state height "+this.STATE_HEIGHT);var b,c,d,e=new Uint8Array(this.TOTAL_CELLS*this.CHANNELS_PER_PIXEL);this.iterateOverAllCells(function(f,g){for(b=a.cellData[f],c=b?this.COLOUR_ALIVE:this.COLOUR_DEAD,d=0;d<this.CHANNELS_PER_PIXEL;d++)e[g+d]=c[d]}),this.textures.front.subset(e,0,0,this.STATE_WIDTH,this.STATE_HEIGHT)},GOL.prototype.randomiseState=function(){this.setStateUsingGOLGrid(GOLGridFactory.createRandomised(this.STATE_WIDTH,this.STATE_HEIGHT))},GOL.prototype.clearState=function(){this.setStateUsingGOLGrid(GOLGridFactory.createEmpty(this.STATE_WIDTH,this.STATE_HEIGHT))},GOL.prototype.setCellState=function(a,b,c){if(0>a)throw new Error("Invalid X coord: "+a);if(0>b)throw new Error("Invalid Y coord: "+b);if(a>=this.STATE_WIDTH)throw new Error("Invalid X coord: "+a+" (width of state is "+this.STATE_WIDTH+")");if(b>=this.STATE_HEIGHT)throw new Error("Invalid Y coord: "+b+" (height of state is "+this.STATE_HEIGHT+")");var d=c?this.COLOUR_ALIVE:this.COLOUR_DEAD;this.textures.front.subset(d,a,b,1,1)},GOL.prototype.mutateRandomCell=function(){var a=Math.floor(Math.random()*this.STATE_WIDTH),b=Math.floor(Math.random()*this.STATE_HEIGHT);this.setCellState(a,b,!0)},GOL.prototype.toggleWrapping=function(){this.enableWrapping=!this.enableWrapping},GOL.prototype.toggleMutation=function(){this.enableMutation=!this.enableMutation},GOL.prototype.swap=function(){var a=this.textures.front;this.textures.front=this.textures.back,this.textures.back=a},GOL.prototype.runProgram=function(a,b,c,d){var e,f=0;for(b.bind(f),a.use(),a.attrib("quad",this.triangleStrip.vertexBuffer,this.triangleStrip.componentsPerVertexAttribute),a.uniformi("sampler",f),e=0;e<c.length;e++)a.uniform(c[e].name,c[e].value);for(e=0;e<d.length;e++)a.uniformi(d[e].name,d[e].value);a.draw(this.triangleStrip.primitivesMode,this.triangleStrip.totalVertices)},GOL.prototype.calculateNextState=function(){this.offscreenFramebuffer.attach(this.textures.back),this.gl.viewport(0,0,this.STATE_WIDTH,this.STATE_HEIGHT);var a=[{name:"stateDimensions",value:new Float32Array([this.STATE_WIDTH,this.STATE_HEIGHT])}],b=[{name:"enableWrapping",value:this.enableWrapping?1:0}];this.runProgram(this.programs.nextState,this.textures.front,a,b),this.swap()},GOL.prototype.renderState=function(){this.igloo.defaultFramebuffer.bind(),this.gl.viewport(0,0,this.VIEW_WIDTH,this.VIEW_HEIGHT);var a=[{name:"viewDimensions",value:new Float32Array([this.VIEW_WIDTH,this.VIEW_HEIGHT])},{name:"colourTopLeft",value:this.cornerColours.topLeft},{name:"colourTopRight",value:this.cornerColours.topRight},{name:"colourBottomLeft",value:this.cornerColours.bottomLeft},{name:"colourBottomRight",value:this.cornerColours.bottomRight}],b=[];this.runProgram(this.programs.render,this.textures.front,a,b)},GOL.prototype.calculateAndRenderNextState=function(){if(this.calculateNextState(),this.currentMode===this.MODE_RANDOM&&this.enableMutation)for(var a=0;a<this.MUTATION_RATE;a++)this.mutateRandomCell();this.renderState()};var GOLGridFactory={createUsingBoolArray:function(a,b,c){var d=new GOLGrid;return d.setUsingBoolArray(a,b,c),d},createUsingTextGrid:function(a,b,c){var d=new GOLGrid;return d.setUsingTextGrid(a,b,c),d},createEmpty:function(a,b){for(var c=[],d=0;a*b>d;d++)c[d]=!1;return GOLGridFactory.createUsingBoolArray(c,a,b)},createRandomised:function(a,b){for(var c=[],d=.5,e=0;a*b>e;e++)c[e]=Math.random()<d;return GOLGridFactory.createUsingBoolArray(c,a,b)}};GOLGrid.prototype.getCellIndex=function(a,b){if(0>a)throw new Error("Invalid X coord: "+a);if(0>b)throw new Error("Invalid Y coord: "+b);if(a>=this.width)throw new Error("Invalid X coord: "+a+" (width of grid is "+this.width+")");if(b>=this.height)throw new Error("Invalid Y coord: "+b+" (height of grid is "+this.height+")");return b*this.width+a},GOLGrid.prototype.getCell=function(a,b){var c=this.getCellIndex(a,b);return this.cellData[c]},GOLGrid.prototype.setCell=function(a,b,c){var d=this.getCellIndex(a,b);this.cellData[d]=c},GOLGrid.prototype.setUsingBoolArray=function(a,b,c){if(a.length!==b*c)throw new Error("Grid dimensions ("+b+" x "+c+" = "+b*c+") do not match total number of cells ("+a.length+")");this.cellData=a,this.width=b,this.height=c},GOLGrid.prototype.setUsingTextGrid=function(a,b,c){var d,e,f,g,h=a.split(/\r\n|\r|\n/g),i=[],j=h[0].length,k=h.length;for(e=0;e<h.length;e++){if(f=h[e].split(""),f.length!==j)throw new Error("Inconsistent row lengths: first row is "+j+" chars, row "+(e+1)+" is "+f.length+" chars");for(d=0;d<f.length;d++)switch(g=f[d]){case b:i.push(!0);break;case c:i.push(!1);break;default:throw new Error("Invalid character found at row "+(e+1)+" column "+(d+1)+": '"+g+"'")}}this.cellData=i,this.width=j,this.height=k},GOLGrid.prototype.paste=function(a,b,c){if(0>b)throw new Error("Invalid X coord: "+b);if(0>c)throw new Error("Invalid Y coord: "+c);if(b+a.width>this.width)throw new Error("With X coord "+b+", pasted grid will not fit within existing grid");if(c+a.height>this.height)throw new Error("With Y coord "+c+", pasted grid will not fit within existing grid");var d,e,f,g;for(e=0;e<a.height;e++)for(g=e+c,d=0;d<a.width;d++)f=d+b,this.setCell(f,g,a.getCell(d,e))},GOLGrid.prototype.getAsTextGrid=function(a,b){var c,d,e="";for(d=0;d<this.height;d++){for(c=0;c<this.width;c++)e+=this.getCell(c,d)?a:b;e+="\n"}return e};var GOLUIHelp={generateMarkersAndBubbles:function(){for(var a=[{id:"CellSize",html:"The width and height of each cell, in pixels<br>(changing this setting will reload the page,<br>to recreate the WebGL textures)"},{id:"TargetFramerate",html:"The number of frames-per-second to attempt to reach"},{id:"ActualFramerate",html:"The actual number of frames-per-second being displayed"},{id:"Wrapping",html:"Wrap the screen horizontally (left and right edges joined)<br>and vertically (top and bottom edges joined)"},{id:"RandomModeMutation",html:"Randomly add live cells<br>to prevent life from dying out"}],b=0;b<a.length;b++)!function(a){$("#tdHelpCell"+a.id).html("").append($("<i></i>").attr("class","fa fa-question-circle help-marker").on("mouseover",function(){$("#divHelpBubble"+a.id).show()}).on("mouseout",function(){$("#divHelpBubble"+a.id).hide()}),$("<div></div>").attr("id","divHelpBubble"+a.id).attr("class","help-bubble").html(a.html))}(a[b])}},GOLUIPanelSupport={show:function(a,b,c,d){$("#divSupportPanelTitleError").toggle(a),$("#divSupportPanelTitleTroubleshooting").toggle(!a),$("#divSupportPanelBrowserHelpContainer").toggle(c),$("#divSupportPanelMessage").text(b);var e=!1;if(null!==d)try{var f=GOLUtils.getWebglInfo(d),g=GOLUtils.getWebglWarnings(d),h=GOLUIUtils.createListElements(f),i=GOLUIUtils.createListElements(g);$("#ulSupportPanelWebGLInfo").html("").append(h),$("#ulSupportPanelWebGLWarnings").html("").append(i),$("#divSupportPanelWebGLWarningsContainer").toggle(g.length>0),e=!0}catch(j){}$("#divSupportPanelWebGLContainer").toggle(e),$("#divSupportPanel").fadeIn(GOLUI.FAST_FADE_DURATION)},initCloseButton:function(){$("#iCloseSupportPanel").show(),$("#iCloseSupportPanel").on("click",function(){GOLUIPanelSupport.close()})},canBeClosed:function(){return $("#divSupportPanel").is(":visible")&&$("#iCloseSupportPanel").is(":visible")},close:function(){$("#divSupportPanel").fadeOut(GOLUI.FAST_FADE_DURATION)}};GOLUISwitcheryMutation.prototype.init=function(){this.switchery=GOLUIUtils.createSwitchery("checkboxSwitcheryRandomModeMutation");var a=this;$("#checkboxSwitcheryRandomModeMutation").on("change",function(){a.gol.toggleMutation(),GOLUIUtils.updateSwitcheryState(a.switchery,a.gol.enableMutation)}),GOLUIUtils.updateSwitcheryState(this.switchery,this.gol.enableMutation)},GOLUISwitcheryWrapping.prototype.init=function(){this.switchery=GOLUIUtils.createSwitchery("checkboxSwitcheryWrapping");var a=this;$("#checkboxSwitcheryWrapping").on("change",function(){a.gol.toggleWrapping(),GOLUIUtils.updateSwitcheryState(a.switchery,a.gol.enableWrapping)}),GOLUIUtils.updateSwitcheryState(this.switchery,this.gol.enableWrapping)},GOLUI.FAST_FADE_DURATION=200,GOLUI.SLOW_FADE_DURATION=1e3,GOLUI.prototype.closeControlPanel=function(){$("#divControlPanel").fadeOut(GOLUI.FAST_FADE_DURATION),this.state.isControlPanelDisplayed=!1},GOLUI.prototype.closeKeyboardShortcutsPanel=function(){$("#divKeyboardShortcutsPanel").fadeOut(GOLUI.FAST_FADE_DURATION),this.state.isKeyboardShortcutsPanelDisplayed=!1},GOLUI.prototype.configureKeyboardShortcutsPanel=function(){var a=this;$("#iCloseKeyboardShortcutsPanel").on("click",function(){a.closeKeyboardShortcutsPanel()})},GOLUI.prototype.updateControlMenu=function(){$("#divControlMenuContainer").toggle(this.state.isControlMenuDisplayed),$("#iControlMenuIcon").toggleClass("control-menu-open",this.state.isControlMenuDisplayed)},GOLUI.prototype.configureControlMenu=function(){var a=this;$("#iControlMenuIcon").on("click",function(b){b.stopPropagation(),a.state.isControlMenuDisplayed=!a.state.isControlMenuDisplayed,a.updateControlMenu()}),$(document).on("click",function(){a.state.isControlMenuDisplayed&&(a.state.isControlMenuDisplayed=!1,a.updateControlMenu())}),$("#divControlMenuKeyboardShortcuts").on("click",function(){a.state.isKeyboardShortcutsPanelDisplayed=!0,$("#divKeyboardShortcutsPanel").fadeIn(GOLUI.FAST_FADE_DURATION)}),$("#divControlMenuTroubleshooting").on("click",function(){GOLUIPanelSupport.show(!1,"Experiencing problems with WebGOL?",!0,a.gol)})},GOLUI.prototype.configureCellSizeMenu=function(){for(var a=[],b=1;20>=b;b++)a.push(b);GOLUIUtils.populateMenuWithValues($("#selectCellSize"),a,this.gol.CELL_SIZE),$("#selectCellSize").on("change",function(){var a=parseInt($(this).val());window.location.href="index.html?cs="+a})},GOLUI.prototype.configureTargetFramerateMenu=function(){var a=[.25,.5,1,2,4,6,8,10,15,20,25,30,40,50,60];GOLUIUtils.populateMenuWithValues($("#selectTargetFramerate"),a,this.golAnimator.targetFPS);var b=this;$("#selectTargetFramerate").on("change",function(){var a=parseFloat($(this).val());b.golAnimator.changeTargetFramerate(a)})},GOLUI.prototype.configureCanvasMousemove=function(){var a=this;$("#golCanvas").on("mousemove",function(){a.state.isToolbarDisplayed||($("#divToolbar").fadeIn(GOLUI.FAST_FADE_DURATION),a.state.isToolbarDisplayed=!0),null!==a.state.toolbarFadeoutTimeoutID&&(clearTimeout(a.state.toolbarFadeoutTimeoutID),a.state.toolbarFadeoutTimeoutID=null),a.state.hasUserOpenedControlPanelYet&&(a.state.toolbarFadeoutTimeoutID=setTimeout(function(){$("#divToolbar").fadeOut(GOLUI.SLOW_FADE_DURATION),a.state.isToolbarDisplayed=!1,a.state.toolbarFadeoutTimeoutID=null},1500))})},GOLUI.prototype.configureCloseControlPanel=function(){var a=this;$("#iCloseControlPanel").on("click",function(){a.closeControlPanel()})},GOLUI.prototype.configureControlKeys=function(){var a=this;$(document).on("keyup",function(b){switch(b.which){case 80:a.golAnimator.toggle(),a.updateToolbar();break;case 83:a.golAnimator.isRunning()||a.gol.calculateAndRenderNextState();break;case 27:GOLUIPanelSupport.canBeClosed()?GOLUIPanelSupport.close():a.state.isKeyboardShortcutsPanelDisplayed?a.closeKeyboardShortcutsPanel():a.state.isControlPanelDisplayed&&a.closeControlPanel()}})},GOLUI.prototype.configureRandomModeRandomiseButton=function(){var a=this;$("#buttonRandomModeRandomise").on("click",function(){a.gol.randomiseState(),a.gol.renderState()})},GOLUI.prototype.updateToolbar=function(){var a=this.golAnimator.isRunning();$("#iToolbarPlay").toggle(!a),$("#iToolbarPause").toggle(a),$("#iToolbarStepForwards").toggleClass("tool-disabled",a)},GOLUI.prototype.configureToolbar=function(){var a=this;this.state.isToolbarDisplayed=!0,$("#divToolbar").fadeIn(GOLUI.SLOW_FADE_DURATION),$("#divToolbar").on("mousemove",function(){null!==a.state.toolbarFadeoutTimeoutID&&(clearTimeout(a.state.toolbarFadeoutTimeoutID),a.state.toolbarFadeoutTimeoutID=null)}),$("#iToolbarPlay, #iToolbarPause").on("click",function(){a.golAnimator.toggle(),a.updateToolbar()}),$("#iToolbarStepForwards").on("click",function(){a.golAnimator.isRunning()||a.gol.calculateAndRenderNextState()}),$("#iToolbarOpenControlPanel").on("click",function(){$("#divToolbar").fadeOut(GOLUI.FAST_FADE_DURATION),$("#divControlPanel").fadeIn(GOLUI.FAST_FADE_DURATION),a.state.isToolbarDisplayed=!1,a.state.isControlPanelDisplayed=!0,a.state.hasUserOpenedControlPanelYet=!0})},GOLUI.prototype.init=function(){GOLUIPanelSupport.initCloseButton(),this.configureKeyboardShortcutsPanel(),this.configureControlMenu(),this.configureCellSizeMenu(),this.configureTargetFramerateMenu();var a=new GOLUISwitcheryWrapping(this.gol),b=new GOLUISwitcheryMutation(this.gol);a.init(),b.init(),this.configureCanvasMousemove(),this.configureCloseControlPanel(),this.configureControlKeys(),this.configureRandomModeRandomiseButton(),GOLUIHelp.generateMarkersAndBubbles(),this.configureToolbar()};var GOLUIUtils={createListElements:function(a){for(var b=[],c=0;c<a.length;c++)b.push($("<li></li>").text(a[c]));return b},createMenuOption:function(a){return $("<option></option>").attr("value",a.value).text(a.label)},populateMenu:function(a,b,c){var d,e,f;for(d=0;d<b.length;d++)e=b[d],f=GOLUIUtils.createMenuOption(e),e.value===c&&f.prop("defaultSelected",!0),a.append(f)},populateMenuWithValues:function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push({value:b[e],label:b[e]});GOLUIUtils.populateMenu(a,d,c)},createSwitchery:function(a){var b=document.getElementById(a),c={color:"#00c000",secondaryColor:"#c00000"};return new Switchery(b,c)},updateSwitcheryState:function(a,b){a.isChecked()!==b&&a.setPosition(!0)}},GOLUtils={fetchShaderSourceCode:function(a){var b=null,c=null,d=null;if($.ajax({url:a,async:!1,dataType:"text",success:function(a){b=!0,c=a},error:function(a,c,e){b=!1,d=e}}),b!==!0){var e="Error fetching '"+a+"' shader source code";throw null!==d&&""!==d&&(e+=": "+d),new Error(e)}return c},getWebglInfo:function(a){var b=a.gl,c=["Vendor = "+b.getParameter(b.VENDOR),"Renderer = "+b.getParameter(b.RENDERER),"Version = "+b.getParameter(b.VERSION),"Shading language version = "+b.getParameter(b.SHADING_LANGUAGE_VERSION)];return b.getError(),c},getWebglWarnings:function(a){var b=a.gl,c=[];!(a.igloo.canvas.getContext("webgl")instanceof WebGLRenderingContext)&&a.igloo.canvas.getContext("experimental-webgl")instanceof WebGLRenderingContext&&c.push("Browser indicates WebGL support is experimental; not all WebGL functionality may be supported, and content may not run as expected"),(b.getParameter(b.RED_BITS)!==a.BITS_PER_PIXEL_CHANNEL||b.getParameter(b.GREEN_BITS)!==a.BITS_PER_PIXEL_CHANNEL||b.getParameter(b.BLUE_BITS)!==a.BITS_PER_PIXEL_CHANNEL||b.getParameter(b.ALPHA_BITS)!==a.BITS_PER_PIXEL_CHANNEL)&&c.push("The number of bits per pixel channel should be "+a.BITS_PER_PIXEL_CHANNEL+", but are actually: red = "+b.getParameter(b.RED_BITS)+", green = "+b.getParameter(b.GREEN_BITS)+", blue = "+b.getParameter(b.BLUE_BITS)+", alpha = "+b.getParameter(b.ALPHA_BITS));var d=b.getParameter(b.MAX_TEXTURE_SIZE);(a.STATE_WIDTH>d||a.STATE_HEIGHT>d)&&c.push("Required texture size is "+a.STATE_WIDTH+" x "+a.STATE_HEIGHT+" but max supported texture size is "+d+" x "+d);var e=b.getParameter(b.MAX_VIEWPORT_DIMS),f=b.getParameter(b.VIEWPORT);return(a.VIEW_WIDTH>e[0]||a.VIEW_HEIGHT>e[1])&&c.push("Required viewport size for canvas is "+a.VIEW_WIDTH+" x "+a.VIEW_HEIGHT+" but max supported viewport size is "+e[0]+" x "+e[1]+" and current viewport size is "+f[2]+" x "+f[3]),b.getError(),c}};